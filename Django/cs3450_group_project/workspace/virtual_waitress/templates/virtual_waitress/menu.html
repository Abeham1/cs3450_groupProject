{% extends "./base.html" %} {% block page-title %}Virtual Waitress Menu{% endblock page-title %} {% block page-style %} 
{{ block.super }}
<style>
    .flexBox {
        width: 100%;
        display: flex;
        flex-direction: row;
    }

    .left {
        display: flex;
        flex: 1;
        flex-direction: column;
        align-items: left;
    }

    .right {
        display: flex;
        flex: 1;
        flex-direction: column;
        align-items: left;
        width: 95%;
        padding: 5px;
        margin: 2px;
        border: solid black;
    }

    .foodMenu {
        width: 95%;
        padding: 5px;
        margin: 2px;
        border: solid black;
    }

    .Review {}

    #menu_bottom {
        flex: 1;
        display: inline;
        flex-direction: row;
    }
</style>
{% endblock page-style %} {% block register-on-load-scripts %}
<script>
    window.onload = function () {
        addMikesMenu();
        addMikesReviews();
        addOrderNumber();
    }
</script> {% endblock register-on-load-scripts %} {% block head-script %}
<script>

    // doing some console logging
    var menu = JSON.parse('{{ comboItemsMenu|escapejs }}');
    var order = JSON.parse('{{ orderList|escapejs }}');
    var nextOrder = order[order.length - 1].id + 1;
    console.log(menu[0].menuItem);
    console.log(menu);
    
    console.log(order[0].id);
    console.log(order.length);
    console.log(order[order.length - 1].id);
    console.log(nextOrder);
    // these are variables to read in
    var primaryCard = "card text-white bg-primary mb-3";
    var sizeMenu = menu.length;
    var itemArray = [];
    var sizeReview = 5;

    var comboReview = [['Cheeseburger', 'Not enough cheese but the bun was great.'], ['Burger', 'Juciest friggin thing evar'],
    ['fries', 'In and out eat your heart out'], ['float', 'Whatever "floats" your boat'],
    ['Burger', 'I\'ve had better']];
    // these are functions to build the dom

    function addOrderNumber() {
        document.getElementById("id_order-orderNumber").value = nextOrder;
    }

    //modify class and id names to get yeti to format reviews here
    function addMikesReviews() {
        var top = document.getElementById("reviews");
        for (var i = 0; i < sizeReview; i++) {
            tempA = document.createElement("TR");
            tempB = document.createElement("TH");
            tempB.innerHTML = comboReview[i][0];
            tempC = document.createElement("TD");
            tempC.innerHTML = comboReview[i][1];
            top.appendChild(tempA);
            tempA.appendChild(tempB);
            tempA.appendChild(tempC);
        }
    }

    //modify class and id names to get yeti to format menu items here
    function addMikesMenu() {
        var top = document.getElementById("menu_left");
        for (var i = 0; i < sizeMenu; i++) {
            itemArray.push(menu[i].menuPrice);
            tempA = document.createElement("DIV");
            tempA.className = primaryCard;
            tempA.style = "max-width: 98%; min-width: 98%;";
            tempB = document.createElement("DIV");
            tempB.className = "card-header";
            tempB.innerHTML = menu[i].menuItem;
            tempDiv = document.createElement("DIV");
            tempDiv.className = "card-body";
            tempC = document.createElement("P");
            tempC.className = "card-text";
            tempC.innerHTML = "Description: " + menu[i].menuDescription;
            tempD = document.createElement("P");
            tempD.className = "card-text";
            tempD.innerHTML = "Price: $" + menu[i].menuPrice;
            tempE = document.createElement("FORM");
            temp7total = document.createElement("INPUT");
            temp7total.type = "text";
            temp7total.readOnly = true;
            temp7total.value = 0.00;
            temp7total.id = "subtotal" + i;
            temp7 = document.createElement("INPUT");
            temp7.type = "number";
            temp7.value = 0;
            temp7.id = "quantity" + i;
            temp7.addEventListener("input", addSubotal);
            temp7b = document.createElement("INPUT");
            temp7b.type = "text";
            temp7b.placeholder = "Special Requests";
            top.appendChild(tempA);
            tempA.appendChild(tempB);
            tempA.appendChild(tempDiv);
            tempDiv.appendChild(tempC);
            tempDiv.appendChild(tempD);
            tempDiv.appendChild(tempE);
            tempE.appendChild(temp7);
            tempE.appendChild(temp7total);
            tempE.appendChild(temp7b);
        }
    }

    function addSubotal() {
        var total = 0;
        for (var i = 0; i < itemArray.length; i++) {
            document.getElementById("subtotal" + i).value = document.getElementById("quantity" + i).value * itemArray[i];
            total = total + document.getElementById("quantity" + i).value * itemArray[i];
        }
        document.getElementById("OrderPriceID").value = total;
        document.getElementById("id_order-total").value = total;
    }

    function addTotal() {
        var total = 0.00;
        for (var i = 0; i < menu.length; i++) {

        }

        alert(document.getElementById("myInput"));
    }

</script> {% endblock head-script %} {% block central-content %}
<div class=flexBox>
    <div class=left id="menu_left">
    </div>
    <div class=right id="menu_right">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Menu Item</th>
                    <td>Customer Review</td>
                </tr>
            </thead>
            <tbody id="reviews">

            </tbody>
        </table>
    </div>
</div>
<div class=flexBox>
    <div class=buttons id="menu_bottom">
        <button id="Request Server" type="button">Request Server</button>
        Table:
        <input type="text" name="table" value="Counter">
        <button id="Order Now" type="button">Order Now</button>
        <label>You're total is:</label>
        <input id=OrderPriceID readOnly></input>
        <button type="button">Pay Now</button>
    </div>
</div>
<div>
    <form action="" method="post">
        {% csrf_token %}
        <tr>
            <th>
                <label for="id_order-total">Total:</label>
            </th>
            <td>
                <input type="number" name="order-total" step="any" required id="id_order-total" />
            </td>
        </tr>
        <tr>
            <th>
                <label for="id_order-orderNumber">Order Number:</label>
            </th>
            <td>
                <input type="number" name="order-orderNumber" required id="id_order-orderNumber"/>
            </td>
        </tr>
        <tr>
            <th>
                <label for="id_order-table">Table:</label>
            </th>
            <td>
                <input type="text" name="order-table" required id="id_order-table"  value="Counter"/>
            </td>
        </tr>
        <br>
        <tr>
            <th>
                <label for="id_orderItem-food">Item:</label>
            </th>
            <td>
                <input type="text" name="orderItem-food" required id="id_orderItem-food" />
            </td>
        </tr>
        <tr>
            <th>
                <label for="id_orderItem-qty">Qty:</label>
            </th>
            <td>
                <input type="number" name="orderItem-qty" required id="id_orderItem-qty" />
            </td>
        </tr>
        <tr>
            <th>
                <label for="id_orderItem-note">Note:</label>
            </th>
            <td>
                <input type="text" name="orderItem-note" required id="id_orderItem-note" />
            </td>
        </tr>

        <input name="placeTestOrder" type="submit" value="Order Now"></input>
    </form>
</div>
{% endblock central-content %}